[Unit]
Description=kyanalyzer

[Service]
Environment=SPARK_HOME=/usr/hdp/current/spark-client
Environment=SPARK_MAJOR_VERSION=1
Environment=JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
Environment=HADOOP_CONF_DIR=/etc/hadoop/conf
Environment=SHLVL=2
Environment=AZURE_SPARK=1
Environment=PYTHONPATH=/usr/hdp/current/spark-client/python:/usr/hdp/current/spark-client/python/lib/py5j-0.9-src.zip

Type=forking
Restart=on-failure
RestartSec=60s
User=kylin
TimeoutSec=180s

ExecStartPre=/usr/local/kyanalyzer/set-java.sh
ExecStart=/usr/local/kyanalyzer/start-analyzer.sh
ExecStop=/usr/local/kyanalyzer/stop-analyzer.sh

[Install]
WantedBy=multi-user.target